<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>æ•°æ®åº“é‡ç½®å·¥å…·</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      max-width: 1000px;
      margin: 0 auto;
      padding: 20px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: #333;
    }

    .container {
      background: white;
      border-radius: 12px;
      padding: 30px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
    }

    h1 {
      color: #1890ff;
      text-align: center;
      margin-bottom: 30px;
      font-size: 2.2em;
    }

    .section {
      margin: 25px 0;
      padding: 20px;
      border: 1px solid #e8e8e8;
      border-radius: 8px;
    }

    .section-title {
      font-size: 1.3em;
      font-weight: bold;
      color: #333;
      margin-bottom: 15px;
      padding-bottom: 8px;
      border-bottom: 2px solid #1890ff;
    }

    .btn {
      background: #1890ff;
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 14px;
      margin: 8px;
      transition: all 0.3s;
    }

    .btn:hover {
      background: #40a9ff;
      transform: translateY(-1px);
    }

    .btn-danger {
      background: #ff4d4f;
    }

    .btn-danger:hover {
      background: #ff7875;
    }

    .btn-success {
      background: #52c41a;
    }

    .btn-success:hover {
      background: #73d13d;
    }

    .btn-warning {
      background: #faad14;
    }

    .btn-warning:hover {
      background: #ffc53d;
    }

    .result {
      background: #f8f9fa;
      border: 1px solid #e9ecef;
      border-radius: 4px;
      padding: 15px;
      margin: 15px 0;
      font-family: 'Courier New', monospace;
      font-size: 13px;
      max-height: 300px;
      overflow-y: auto;
    }

    .result.success {
      background: #f6ffed;
      border-color: #b7eb8f;
      color: #389e0d;
    }

    .result.error {
      background: #fff2f0;
      border-color: #ffccc7;
      color: #cf1322;
    }

    .result.warning {
      background: #fffbe6;
      border-color: #ffe58f;
      color: #d46b08;
    }

    .stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
      margin: 20px 0;
    }

    .stat-card {
      background: #fafafa;
      padding: 15px;
      border-radius: 4px;
      text-align: center;
      border: 1px solid #e8e8e8;
    }

    .stat-number {
      font-size: 24px;
      font-weight: bold;
      color: #1890ff;
    }

    .stat-label {
      color: #666;
      margin-top: 5px;
      font-size: 14px;
    }

    .progress {
      width: 100%;
      height: 20px;
      background: #f0f0f0;
      border-radius: 10px;
      overflow: hidden;
      margin: 10px 0;
    }

    .progress-bar {
      height: 100%;
      background: linear-gradient(45deg, #1890ff, #40a9ff);
      width: 0%;
      transition: width 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 12px;
      font-weight: bold;
    }

    .warning-box {
      background: #fff7e6;
      border: 1px solid #ffd591;
      padding: 20px;
      border-radius: 8px;
      margin: 20px 0;
    }

    .warning-title {
      color: #fa8c16;
      font-weight: bold;
      margin-bottom: 10px;
      font-size: 16px;
    }

    .data-preview {
      background: #f8f9fa;
      border: 1px solid #e9ecef;
      border-radius: 4px;
      padding: 15px;
      margin: 10px 0;
      max-height: 200px;
      overflow-y: auto;
      font-family: 'Courier New', monospace;
      font-size: 12px;
    }
  </style>
</head>

<body>
  <div class="container">
    <h1>ğŸ—„ï¸ æ•°æ®åº“é‡ç½®å·¥å…·</h1>

    <!-- å½“å‰çŠ¶æ€ -->
    <div class="section">
      <div class="section-title">ğŸ“Š å½“å‰æ•°æ®åº“çŠ¶æ€</div>
      <div class="stats" id="database-stats">
        <div class="stat-card">
          <div class="stat-number" id="builtin-apps-count">-</div>
          <div class="stat-label">å†…ç½®åº”ç”¨</div>
        </div>
        <div class="stat-card">
          <div class="stat-number" id="coloring-strategies-count">-</div>
          <div class="stat-label">æµé‡æŸ“è‰²ç­–ç•¥</div>
        </div>
        <div class="stat-card">
          <div class="stat-number" id="recognition-strategies-count">-</div>
          <div class="stat-label">è¯†åˆ«ç­–ç•¥</div>
        </div>
        <div class="stat-card">
          <div class="stat-number" id="watermark-configs-count">-</div>
          <div class="stat-label">æ°´å°é…ç½®</div>
        </div>
      </div>
      <button class="btn" onclick="loadCurrentStats()">åˆ·æ–°ç»Ÿè®¡</button>
    </div>

    <!-- æ•°æ®åº“æ“ä½œ -->
    <div class="section">
      <div class="section-title">ğŸ”„ æ•°æ®åº“æ“ä½œ</div>
      <div class="warning-box">
        <div class="warning-title">âš ï¸ é‡è¦æé†’</div>
        <p>æ¸…ç©ºæ•°æ®åº“å°†åˆ é™¤æ‰€æœ‰ç°æœ‰æ•°æ®ï¼ŒåŒ…æ‹¬æ‚¨æ·»åŠ çš„è‡ªå®šä¹‰æ•°æ®ã€‚è¯·ç¡®ä¿æ‚¨äº†è§£æ­¤æ“ä½œçš„åæœã€‚</p>
        <p>å»ºè®®åœ¨æ“ä½œå‰å…ˆå¤‡ä»½é‡è¦æ•°æ®ã€‚</p>
      </div>

      <button class="btn btn-warning" onclick="clearDatabase()">æ¸…ç©ºæ•°æ®åº“</button>
      <button class="btn btn-success" onclick="initializeDatabase()">é‡æ–°åˆå§‹åŒ–æ•°æ®åº“</button>
      <button class="btn btn-danger" onclick="resetCompleteDatabase()">å®Œå…¨é‡ç½®æ•°æ®åº“</button>

      <div class="progress" id="operation-progress" style="display: none;">
        <div class="progress-bar" id="progress-bar">0%</div>
      </div>

      <div id="operation-result"></div>
    </div>

    <!-- æ•°æ®æ³¨å…¥ -->
    <div class="section">
      <div class="section-title">ğŸ“¥ æ–°åº”ç”¨æ•°æ®æ³¨å…¥</div>
      <p>å°†æ³¨å…¥ <strong id="new-apps-count">100+</strong> ä¸ªå®Œæ•´çš„ä¼ä¸šçº§åº”ç”¨æ•°æ®</p>

      <button class="btn btn-success" onclick="injectNewAppData()">æ³¨å…¥å®Œæ•´åº”ç”¨æ•°æ®</button>
      <button class="btn" onclick="previewNewData()">é¢„è§ˆæ–°æ•°æ®</button>

      <div class="data-preview" id="data-preview" style="display: none;"></div>
      <div id="injection-result"></div>
    </div>

    <!-- æ“ä½œæ—¥å¿— -->
    <div class="section">
      <div class="section-title">ğŸ“ æ“ä½œæ—¥å¿—</div>
      <div class="result" id="operation-log">
        ç­‰å¾…æ“ä½œ...
      </div>
      <button class="btn" onclick="clearLog()">æ¸…ç©ºæ—¥å¿—</button>
    </div>
  </div>

  <!-- å¼•å…¥ä¾èµ– -->
  <script src="https://unpkg.com/dexie@3.2.4/dist/dexie.js"></script>
  <script src="AppDataManagerV2.js"></script>
  <script src="complete-app-data.js"></script>

  <script>
    // å®Œæ•´çš„ä¼ä¸šçº§åº”ç”¨æ•°æ®
    const completeAppData = [
      // åŠå…¬åº”ç”¨ - é‚®ä»¶ç³»ç»Ÿ
      { name: 'Microsoft Outlook', address: 'outlook.office365.com', type: 'é‚®ä»¶ç³»ç»Ÿ', category: 'åŠå…¬åº”ç”¨', status: 'å¯ç”¨', description: 'å¾®è½¯ä¼ä¸šé‚®ç®±æœåŠ¡', tags: ['é‚®ä»¶', 'åŠå…¬', 'å¾®è½¯'] },
      { name: 'Gmail', address: 'mail.google.com', type: 'é‚®ä»¶ç³»ç»Ÿ', category: 'åŠå…¬åº”ç”¨', status: 'å¯ç”¨', description: 'è°·æ­Œé‚®ç®±æœåŠ¡', tags: ['é‚®ä»¶', 'åŠå…¬', 'è°·æ­Œ'] },
      { name: 'QQé‚®ç®±', address: 'mail.qq.com', type: 'é‚®ä»¶ç³»ç»Ÿ', category: 'åŠå…¬åº”ç”¨', status: 'å¯ç”¨', description: 'è…¾è®¯QQé‚®ç®±æœåŠ¡', tags: ['é‚®ä»¶', 'åŠå…¬', 'è…¾è®¯'] },
      { name: '163é‚®ç®±', address: 'mail.163.com', type: 'é‚®ä»¶ç³»ç»Ÿ', category: 'åŠå…¬åº”ç”¨', status: 'å¯ç”¨', description: 'ç½‘æ˜“163é‚®ç®±æœåŠ¡', tags: ['é‚®ä»¶', 'åŠå…¬', 'ç½‘æ˜“'] },
      { name: 'ä¼ä¸šå¾®ä¿¡é‚®ç®±', address: 'exmail.qq.com', type: 'é‚®ä»¶ç³»ç»Ÿ', category: 'åŠå…¬åº”ç”¨', status: 'å¯ç”¨', description: 'è…¾è®¯ä¼ä¸šé‚®ç®±æœåŠ¡', tags: ['é‚®ä»¶', 'åŠå…¬', 'ä¼ä¸šå¾®ä¿¡'] },

      // åŠå…¬åº”ç”¨ - æ–‡æ¡£åä½œ
      { name: 'Microsoft Office Online', address: 'office.live.com', type: 'æ–‡æ¡£åä½œ', category: 'åŠå…¬åº”ç”¨', status: 'å¯ç”¨', description: 'å¾®è½¯åœ¨çº¿åŠå…¬å¥—ä»¶', tags: ['æ–‡æ¡£', 'åä½œ', 'å¾®è½¯'] },
      { name: 'Google Docs', address: 'docs.google.com', type: 'æ–‡æ¡£åä½œ', category: 'åŠå…¬åº”ç”¨', status: 'å¯ç”¨', description: 'è°·æ­Œåœ¨çº¿æ–‡æ¡£æœåŠ¡', tags: ['æ–‡æ¡£', 'åä½œ', 'è°·æ­Œ'] },
      { name: 'è…¾è®¯æ–‡æ¡£', address: 'docs.qq.com', type: 'æ–‡æ¡£åä½œ', category: 'åŠå…¬åº”ç”¨', status: 'å¯ç”¨', description: 'è…¾è®¯åœ¨çº¿æ–‡æ¡£æœåŠ¡', tags: ['æ–‡æ¡£', 'åä½œ', 'è…¾è®¯'] },
      { name: 'é‡‘å±±æ–‡æ¡£', address: 'www.kdocs.cn', type: 'æ–‡æ¡£åä½œ', category: 'åŠå…¬åº”ç”¨', status: 'å¯ç”¨', description: 'é‡‘å±±åœ¨çº¿æ–‡æ¡£æœåŠ¡', tags: ['æ–‡æ¡£', 'åä½œ', 'é‡‘å±±'] },
      { name: 'çŸ³å¢¨æ–‡æ¡£', address: 'shimo.im', type: 'æ–‡æ¡£åä½œ', category: 'åŠå…¬åº”ç”¨', status: 'å¯ç”¨', description: 'çŸ³å¢¨åœ¨çº¿æ–‡æ¡£æœåŠ¡', tags: ['æ–‡æ¡£', 'åä½œ', 'çŸ³å¢¨'] },

      // åŠå…¬åº”ç”¨ - è§†é¢‘ä¼šè®®
      { name: 'Zoom', address: 'zoom.us', type: 'è§†é¢‘ä¼šè®®', category: 'åŠå…¬åº”ç”¨', status: 'å¯ç”¨', description: 'Zoomè§†é¢‘ä¼šè®®å¹³å°', tags: ['è§†é¢‘ä¼šè®®', 'è¿œç¨‹åŠå…¬', 'Zoom'] },
      { name: 'è…¾è®¯ä¼šè®®', address: 'meeting.tencent.com', type: 'è§†é¢‘ä¼šè®®', category: 'åŠå…¬åº”ç”¨', status: 'å¯ç”¨', description: 'è…¾è®¯è§†é¢‘ä¼šè®®å¹³å°', tags: ['è§†é¢‘ä¼šè®®', 'è¿œç¨‹åŠå…¬', 'è…¾è®¯'] },
      { name: 'é’‰é’‰', address: 'www.dingtalk.com', type: 'è§†é¢‘ä¼šè®®', category: 'åŠå…¬åº”ç”¨', status: 'å¯ç”¨', description: 'é˜¿é‡Œå·´å·´é’‰é’‰å¹³å°', tags: ['è§†é¢‘ä¼šè®®', 'è¿œç¨‹åŠå…¬', 'é˜¿é‡Œ'] },
      { name: 'é£ä¹¦', address: 'www.feishu.cn', type: 'è§†é¢‘ä¼šè®®', category: 'åŠå…¬åº”ç”¨', status: 'å¯ç”¨', description: 'å­—èŠ‚è·³åŠ¨é£ä¹¦å¹³å°', tags: ['è§†é¢‘ä¼šè®®', 'è¿œç¨‹åŠå…¬', 'å­—èŠ‚'] },
      { name: 'Microsoft Teams', address: 'teams.microsoft.com', type: 'è§†é¢‘ä¼šè®®', category: 'åŠå…¬åº”ç”¨', status: 'å¯ç”¨', description: 'å¾®è½¯Teamsåä½œå¹³å°', tags: ['è§†é¢‘ä¼šè®®', 'è¿œç¨‹åŠå…¬', 'å¾®è½¯'] },

      // å¼€å‘å·¥å…· - ä»£ç ä»“åº“
      { name: 'GitHub', address: 'github.com', type: 'ä»£ç ä»“åº“', category: 'å¼€å‘å·¥å…·', status: 'å¯ç”¨', description: 'GitHubä»£ç æ‰˜ç®¡å¹³å°', tags: ['ä»£ç ä»“åº“', 'Git', 'å¼€æº'] },
      { name: 'GitLab', address: 'gitlab.com', type: 'ä»£ç ä»“åº“', category: 'å¼€å‘å·¥å…·', status: 'å¯ç”¨', description: 'GitLabä»£ç æ‰˜ç®¡å¹³å°', tags: ['ä»£ç ä»“åº“', 'Git', 'CI/CD'] },
      { name: 'Gitee', address: 'gitee.com', type: 'ä»£ç ä»“åº“', category: 'å¼€å‘å·¥å…·', status: 'å¯ç”¨', description: 'ç äº‘ä»£ç æ‰˜ç®¡å¹³å°', tags: ['ä»£ç ä»“åº“', 'Git', 'å›½å†…'] },
      { name: 'Bitbucket', address: 'bitbucket.org', type: 'ä»£ç ä»“åº“', category: 'å¼€å‘å·¥å…·', status: 'å¯ç”¨', description: 'Atlassianä»£ç æ‰˜ç®¡å¹³å°', tags: ['ä»£ç ä»“åº“', 'Git', 'Atlassian'] },
      { name: 'Coding', address: 'coding.net', type: 'ä»£ç ä»“åº“', category: 'å¼€å‘å·¥å…·', status: 'å¯ç”¨', description: 'è…¾è®¯äº‘å¼€å‘è€…å¹³å°', tags: ['ä»£ç ä»“åº“', 'Git', 'è…¾è®¯'] },

      // å¼€å‘å·¥å…· - CI/CDå·¥å…·
      { name: 'Jenkins', address: 'jenkins.io', type: 'CI/CDå·¥å…·', category: 'å¼€å‘å·¥å…·', status: 'å¯ç”¨', description: 'JenkinsæŒç»­é›†æˆå¹³å°', tags: ['CI/CD', 'è‡ªåŠ¨åŒ–', 'å¼€æº'] },
      { name: 'GitHub Actions', address: 'github.com/features/actions', type: 'CI/CDå·¥å…·', category: 'å¼€å‘å·¥å…·', status: 'å¯ç”¨', description: 'GitHub Actionsè‡ªåŠ¨åŒ–å¹³å°', tags: ['CI/CD', 'è‡ªåŠ¨åŒ–', 'GitHub'] },
      { name: 'GitLab CI', address: 'docs.gitlab.com/ee/ci', type: 'CI/CDå·¥å…·', category: 'å¼€å‘å·¥å…·', status: 'å¯ç”¨', description: 'GitLab CI/CDå¹³å°', tags: ['CI/CD', 'è‡ªåŠ¨åŒ–', 'GitLab'] },
      { name: 'Travis CI', address: 'travis-ci.org', type: 'CI/CDå·¥å…·', category: 'å¼€å‘å·¥å…·', status: 'å¯ç”¨', description: 'Travis CIæŒç»­é›†æˆå¹³å°', tags: ['CI/CD', 'è‡ªåŠ¨åŒ–', 'å¼€æº'] },
      { name: 'CircleCI', address: 'circleci.com', type: 'CI/CDå·¥å…·', category: 'å¼€å‘å·¥å…·', status: 'å¯ç”¨', description: 'CircleCIæŒç»­é›†æˆå¹³å°', tags: ['CI/CD', 'è‡ªåŠ¨åŒ–', 'äº‘æœåŠ¡'] },

      // äº‘æœåŠ¡ - å¯¹è±¡å­˜å‚¨
      { name: 'é˜¿é‡Œäº‘OSS', address: 'oss.aliyun.com', type: 'å¯¹è±¡å­˜å‚¨', category: 'äº‘æœåŠ¡', status: 'å¯ç”¨', description: 'é˜¿é‡Œäº‘å¯¹è±¡å­˜å‚¨æœåŠ¡', tags: ['å¯¹è±¡å­˜å‚¨', 'äº‘æœåŠ¡', 'é˜¿é‡Œäº‘'] },
      { name: 'è…¾è®¯äº‘COS', address: 'cloud.tencent.com/product/cos', type: 'å¯¹è±¡å­˜å‚¨', category: 'äº‘æœåŠ¡', status: 'å¯ç”¨', description: 'è…¾è®¯äº‘å¯¹è±¡å­˜å‚¨æœåŠ¡', tags: ['å¯¹è±¡å­˜å‚¨', 'äº‘æœåŠ¡', 'è…¾è®¯äº‘'] },
      { name: 'AWS S3', address: 'aws.amazon.com/s3', type: 'å¯¹è±¡å­˜å‚¨', category: 'äº‘æœåŠ¡', status: 'å¯ç”¨', description: 'äºšé©¬é€ŠS3å¯¹è±¡å­˜å‚¨æœåŠ¡', tags: ['å¯¹è±¡å­˜å‚¨', 'äº‘æœåŠ¡', 'AWS'] },
      { name: 'Azure Blob', address: 'azure.microsoft.com/services/storage/blobs', type: 'å¯¹è±¡å­˜å‚¨', category: 'äº‘æœåŠ¡', status: 'å¯ç”¨', description: 'å¾®è½¯Azure Blobå­˜å‚¨æœåŠ¡', tags: ['å¯¹è±¡å­˜å‚¨', 'äº‘æœåŠ¡', 'Azure'] },

      // ä¼ä¸šç®¡ç† - ERP
      { name: 'ç”¨å‹ERP', address: 'yonyou.com/erp', type: 'ERP', category: 'ä¼ä¸šç®¡ç†', status: 'å¯ç”¨', description: 'ç”¨å‹ERPç³»ç»Ÿ', tags: ['ERP', 'ä¼ä¸šç®¡ç†', 'ç”¨å‹'] },
      { name: 'é‡‘è¶ERP', address: 'kingdee.com/erp', type: 'ERP', category: 'ä¼ä¸šç®¡ç†', status: 'å¯ç”¨', description: 'é‡‘è¶ERPç³»ç»Ÿ', tags: ['ERP', 'ä¼ä¸šç®¡ç†', 'é‡‘è¶'] },
      { name: 'SAP ERP', address: 'sap.com/erp', type: 'ERP', category: 'ä¼ä¸šç®¡ç†', status: 'å¯ç”¨', description: 'SAP ERPç³»ç»Ÿ', tags: ['ERP', 'ä¼ä¸šç®¡ç†', 'SAP'] },
      { name: 'Oracle ERP', address: 'oracle.com/erp', type: 'ERP', category: 'ä¼ä¸šç®¡ç†', status: 'å¯ç”¨', description: 'Oracle ERPç³»ç»Ÿ', tags: ['ERP', 'ä¼ä¸šç®¡ç†', 'Oracle'] },

      // å®‰å…¨å·¥å…· - é˜²ç«å¢™
      { name: 'æ€ç§‘é˜²ç«å¢™', address: 'cisco.com/firewall', type: 'é˜²ç«å¢™', category: 'å®‰å…¨å·¥å…·', status: 'å¯ç”¨', description: 'æ€ç§‘ä¼ä¸šçº§é˜²ç«å¢™', tags: ['é˜²ç«å¢™', 'å®‰å…¨', 'æ€ç§‘'] },
      { name: 'åä¸ºé˜²ç«å¢™', address: 'huawei.com/firewall', type: 'é˜²ç«å¢™', category: 'å®‰å…¨å·¥å…·', status: 'å¯ç”¨', description: 'åä¸ºä¼ä¸šçº§é˜²ç«å¢™', tags: ['é˜²ç«å¢™', 'å®‰å…¨', 'åä¸º'] },
      { name: 'H3Cé˜²ç«å¢™', address: 'h3c.com/firewall', type: 'é˜²ç«å¢™', category: 'å®‰å…¨å·¥å…·', status: 'å¯ç”¨', description: 'H3Cä¼ä¸šçº§é˜²ç«å¢™', tags: ['é˜²ç«å¢™', 'å®‰å…¨', 'H3C'] },

      // æ•°æ®åˆ†æ - å•†ä¸šæ™ºèƒ½
      { name: 'Tableau', address: 'tableau.com', type: 'å•†ä¸šæ™ºèƒ½', category: 'æ•°æ®åˆ†æ', status: 'å¯ç”¨', description: 'Tableauæ•°æ®å¯è§†åŒ–å¹³å°', tags: ['å•†ä¸šæ™ºèƒ½', 'å¯è§†åŒ–', 'Tableau'] },
      { name: 'Power BI', address: 'powerbi.microsoft.com', type: 'å•†ä¸šæ™ºèƒ½', category: 'æ•°æ®åˆ†æ', status: 'å¯ç”¨', description: 'å¾®è½¯Power BIå•†ä¸šæ™ºèƒ½', tags: ['å•†ä¸šæ™ºèƒ½', 'å¯è§†åŒ–', 'å¾®è½¯'] },
      { name: 'QlikView', address: 'qlik.com', type: 'å•†ä¸šæ™ºèƒ½', category: 'æ•°æ®åˆ†æ', status: 'å¯ç”¨', description: 'Qlikå•†ä¸šæ™ºèƒ½å¹³å°', tags: ['å•†ä¸šæ™ºèƒ½', 'å¯è§†åŒ–', 'Qlik'] },

      // é€šä¿¡æœåŠ¡ - å³æ—¶é€šè®¯
      { name: 'Slack', address: 'slack.com', type: 'å³æ—¶é€šè®¯', category: 'é€šä¿¡æœåŠ¡', status: 'å¯ç”¨', description: 'Slackå›¢é˜Ÿåä½œå¹³å°', tags: ['å³æ—¶é€šè®¯', 'åä½œ', 'Slack'] },
      { name: 'Discord', address: 'discord.com', type: 'å³æ—¶é€šè®¯', category: 'é€šä¿¡æœåŠ¡', status: 'å¯ç”¨', description: 'Discordæ¸¸æˆè¯­éŸ³å¹³å°', tags: ['å³æ—¶é€šè®¯', 'è¯­éŸ³', 'Discord'] },
      { name: 'Telegram', address: 'telegram.org', type: 'å³æ—¶é€šè®¯', category: 'é€šä¿¡æœåŠ¡', status: 'å¯ç”¨', description: 'Telegramå³æ—¶é€šè®¯', tags: ['å³æ—¶é€šè®¯', 'åŠ å¯†', 'Telegram'] }
    ];

    // åˆå§‹åŒ–
    document.addEventListener('DOMContentLoaded', async function () {
      await initializeManager();
      await loadCurrentStats();
      log('âœ… æ•°æ®åº“é‡ç½®å·¥å…·å·²åˆå§‹åŒ–');

      // æ˜¾ç¤ºæ–°åº”ç”¨æ•°æ®æ•°é‡
      document.getElementById('new-apps-count').textContent = completeAppData.length;
    });

    async function initializeManager() {
      try {
        if (!AppDataManagerV2.initialized) {
          await AppDataManagerV2.init();
        }
      } catch (error) {
        log(`âŒ åˆå§‹åŒ–å¤±è´¥: ${error.message}`);
      }
    }

    // åŠ è½½å½“å‰ç»Ÿè®¡
    async function loadCurrentStats() {
      try {
        log('ğŸ”„ åŠ è½½æ•°æ®åº“ç»Ÿè®¡...');

        const builtinCount = await AppDataManagerV2.db.builtinApps.count();
        const coloringCount = await AppDataManagerV2.db.coloringStrategies.count();
        const recognitionCount = await AppDataManagerV2.db.recognitionStrategies.count();
        const watermarkCount = await AppDataManagerV2.db.watermarkConfigs.count();

        document.getElementById('builtin-apps-count').textContent = builtinCount;
        document.getElementById('coloring-strategies-count').textContent = coloringCount;
        document.getElementById('recognition-strategies-count').textContent = recognitionCount;
        document.getElementById('watermark-configs-count').textContent = watermarkCount;

        log(`âœ… ç»Ÿè®¡åŠ è½½å®Œæˆ: å†…ç½®åº”ç”¨ ${builtinCount}, æŸ“è‰²ç­–ç•¥ ${coloringCount}, è¯†åˆ«ç­–ç•¥ ${recognitionCount}, æ°´å°é…ç½® ${watermarkCount}`);
      } catch (error) {
        log(`âŒ ç»Ÿè®¡åŠ è½½å¤±è´¥: ${error.message}`);
      }
    }

    // æ¸…ç©ºæ•°æ®åº“
    async function clearDatabase() {
      if (!confirm('âš ï¸ ç¡®å®šè¦æ¸…ç©ºæ•°æ®åº“å—ï¼Ÿæ­¤æ“ä½œå°†åˆ é™¤æ‰€æœ‰æ•°æ®ï¼')) {
        return;
      }

      try {
        log('ğŸ—‘ï¸ å¼€å§‹æ¸…ç©ºæ•°æ®åº“...');
        showProgress(0);

        const tables = ['builtinApps', 'coloringStrategies', 'recognitionStrategies', 'watermarkConfigs'];
        for (let i = 0; i < tables.length; i++) {
          const table = tables[i];
          await AppDataManagerV2.db[table].clear();
          const progress = ((i + 1) / tables.length) * 100;
          showProgress(progress);
          log(`âœ… å·²æ¸…ç©º ${table} è¡¨`);
        }

        hideProgress();
        showResult('success', 'âœ… æ•°æ®åº“å·²å®Œå…¨æ¸…ç©º');
        await loadCurrentStats();
      } catch (error) {
        hideProgress();
        showResult('error', `âŒ æ¸…ç©ºå¤±è´¥: ${error.message}`);
        log(`âŒ æ¸…ç©ºæ•°æ®åº“å¤±è´¥: ${error.message}`);
      }
    }

    // é‡æ–°åˆå§‹åŒ–æ•°æ®åº“
    async function initializeDatabase() {
      try {
        log('ğŸ”„ å¼€å§‹é‡æ–°åˆå§‹åŒ–æ•°æ®åº“...');
        showProgress(0);

        // é‡ç½®åˆå§‹åŒ–çŠ¶æ€
        AppDataManagerV2.initialized = false;

        showProgress(25);
        await AppDataManagerV2.init();

        showProgress(100);
        hideProgress();
        showResult('success', 'âœ… æ•°æ®åº“é‡æ–°åˆå§‹åŒ–æˆåŠŸ');
        await loadCurrentStats();
        log('âœ… æ•°æ®åº“é‡æ–°åˆå§‹åŒ–å®Œæˆ');
      } catch (error) {
        hideProgress();
        showResult('error', `âŒ åˆå§‹åŒ–å¤±è´¥: ${error.message}`);
        log(`âŒ æ•°æ®åº“åˆå§‹åŒ–å¤±è´¥: ${error.message}`);
      }
    }

    // å®Œå…¨é‡ç½®æ•°æ®åº“
    async function resetCompleteDatabase() {
      if (!confirm('âš ï¸ ç¡®å®šè¦å®Œå…¨é‡ç½®æ•°æ®åº“å—ï¼Ÿè¿™å°†åˆ é™¤æ•°æ®åº“å¹¶é‡æ–°åˆ›å»ºï¼')) {
        return;
      }

      try {
        log('ğŸ”„ å¼€å§‹å®Œå…¨é‡ç½®æ•°æ®åº“...');
        showProgress(0);

        // åˆ é™¤æ•°æ®åº“
        await AppDataManagerV2.db.delete();
        showProgress(50);
        log('âœ… æ—§æ•°æ®åº“å·²åˆ é™¤');

        // é‡æ–°åˆå§‹åŒ–
        AppDataManagerV2.initialized = false;
        AppDataManagerV2.db = null;
        await AppDataManagerV2.init();

        showProgress(100);
        hideProgress();
        showResult('success', 'âœ… æ•°æ®åº“å®Œå…¨é‡ç½®æˆåŠŸ');
        await loadCurrentStats();
        log('âœ… æ•°æ®åº“å®Œå…¨é‡ç½®å®Œæˆ');
      } catch (error) {
        hideProgress();
        showResult('error', `âŒ é‡ç½®å¤±è´¥: ${error.message}`);
        log(`âŒ æ•°æ®åº“é‡ç½®å¤±è´¥: ${error.message}`);
      }
    }

    // æ³¨å…¥æ–°åº”ç”¨æ•°æ®
    async function injectNewAppData() {
      try {
        log('ğŸ“¥ å¼€å§‹æ³¨å…¥æ–°åº”ç”¨æ•°æ®...');
        showProgress(0);

        // å…ˆæ¸…ç©ºç°æœ‰çš„å†…ç½®åº”ç”¨æ•°æ®
        await AppDataManagerV2.db.builtinApps.clear();
        log('âœ… å·²æ¸…ç©ºç°æœ‰å†…ç½®åº”ç”¨æ•°æ®');

        const currentTime = new Date().toISOString();
        let injectedCount = 0;

        for (let i = 0; i < completeAppData.length; i++) {
          const app = {
            ...completeAppData[i],
            createTime: currentTime,
            lastUpdated: currentTime
          };

          await AppDataManagerV2.db.builtinApps.add(app);
          injectedCount++;

          const progress = ((i + 1) / completeAppData.length) * 100;
          showProgress(progress);

          if (injectedCount % 10 === 0) {
            log(`ğŸ“¥ å·²æ³¨å…¥ ${injectedCount}/${completeAppData.length} ä¸ªåº”ç”¨`);
          }
        }

        hideProgress();
        showInjectionResult('success', `âœ… æˆåŠŸæ³¨å…¥ ${injectedCount} ä¸ªä¼ä¸šçº§åº”ç”¨æ•°æ®`);
        await loadCurrentStats();
        log(`âœ… åº”ç”¨æ•°æ®æ³¨å…¥å®Œæˆ: ${injectedCount} ä¸ªåº”ç”¨`);
      } catch (error) {
        hideProgress();
        showInjectionResult('error', `âŒ æ³¨å…¥å¤±è´¥: ${error.message}`);
        log(`âŒ æ•°æ®æ³¨å…¥å¤±è´¥: ${error.message}`);
      }
    }

    // é¢„è§ˆæ–°æ•°æ®
    function previewNewData() {
      const preview = document.getElementById('data-preview');
      let html = `é¢„è§ˆå‰ 10 ä¸ªåº”ç”¨æ•°æ®:\n\n`;

      completeAppData.slice(0, 10).forEach((app, index) => {
        html += `${index + 1}. ${app.name} (${app.category})\n`;
        html += `   åœ°å€: ${app.address}\n`;
        html += `   ç±»å‹: ${app.type}\n`;
        html += `   æ ‡ç­¾: ${app.tags.join(', ')}\n\n`;
      });

      html += `... è¿˜æœ‰ ${completeAppData.length - 10} ä¸ªåº”ç”¨\n\n`;
      html += `æ€»è®¡: ${completeAppData.length} ä¸ªä¼ä¸šçº§åº”ç”¨`;

      preview.textContent = html;
      preview.style.display = 'block';
    }

    // æ˜¾ç¤ºè¿›åº¦
    function showProgress(percent) {
      const progressContainer = document.getElementById('operation-progress');
      const progressBar = document.getElementById('progress-bar');

      progressContainer.style.display = 'block';
      progressBar.style.width = percent + '%';
      progressBar.textContent = Math.round(percent) + '%';
    }

    // éšè—è¿›åº¦
    function hideProgress() {
      document.getElementById('operation-progress').style.display = 'none';
    }

    // æ˜¾ç¤ºæ“ä½œç»“æœ
    function showResult(type, message) {
      const resultDiv = document.getElementById('operation-result');
      resultDiv.innerHTML = `<div class="result ${type}">${message}</div>`;
    }

    // æ˜¾ç¤ºæ³¨å…¥ç»“æœ
    function showInjectionResult(type, message) {
      const resultDiv = document.getElementById('injection-result');
      resultDiv.innerHTML = `<div class="result ${type}">${message}</div>`;
    }

    // æ—¥å¿—åŠŸèƒ½
    function log(message) {
      const logOutput = document.getElementById('operation-log');
      const timestamp = new Date().toLocaleTimeString();
      const logEntry = `[${timestamp}] ${message}\n`;

      logOutput.textContent += logEntry;
      logOutput.scrollTop = logOutput.scrollHeight;

      console.log(message);
    }

    function clearLog() {
      document.getElementById('operation-log').textContent = 'ç­‰å¾…æ“ä½œ...\n';
    }
  </script>
</body>

</html>